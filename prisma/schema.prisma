generator client {
provider = "prisma-client-js"
}


datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
model Usuario {
  id                  Int            @id @default(autoincrement())
  nome                String
  celular             String
  fcm_token String?
  nif                 String
  description         String         @default("Lorem ipsum dolor, sit amet consectetur adipisicing elit. Atque, eius, optio deleniti laudantium nesciunt a, repudiandae modi deserunt minus nihil ad laboriosam sit cumque iusto qui in dolore et dicta.")
  palavraPasse        String
  estrelas            Float?
  pushSubscription Json?
  profissao           String
  link                String?
  estado_conta        ACCOUNT_STATUS @default(ACTIVA)
  created_at          DateTime       @default(now())
  role                Role           @default(CLIENTE_INDIVIDUAL)
  image_path          String?
  provincia           String
  municipio           String
  nomeRepresentante   String?
  latitude    Float?
  longitude    Float?
  postsvitrineId      Int?
  Commentario         Commentario[]
  avaliacoesFeitas    Avaliacao[]    @relation("ClienteAvaliacoes")
  avaliacoesRecebidas Avaliacao[]    @relation("PrestadorAvaliacoes")
  carteira            Carteira?
  favoritosFeitos     Favoritos[]    @relation("ClienteFavoritos")
  favoritosRecebidos  Favoritos[]    @relation("PrestadorFavoritos")
  interesses          Interesse[]    @relation("InteressePrestador")
  notificacoes        Notificacao[]
  pedidos             Pedido[]
  Postsvitrine        Postsvitrine[]
  transacoes          Transacao[]

  @@map("usuario")
}

model Favoritos {
  id          Int      @id @default(autoincrement())
  created_at  DateTime @default(now())
  clienteId   Int
  prestadorId Int
  cliente     Usuario  @relation("ClienteFavoritos", fields: [clienteId], references: [id])
  prestador   Usuario  @relation("PrestadorFavoritos", fields: [prestadorId], references: [id])

  @@map("favoritos")
}

model Pedido {
  id           Int         @id @default(autoincrement())
  title        String
  content      String
  image_path   String?
  brevidade    Brevidade   @default(URGENTE)
  accepted     Boolean     @default(true)
  status       STATUS      @default(PENDING)
  location     String
  latitude     Float
  longitude    Float
  created_at   DateTime    @default(now())
  usuarioId    Int
  interessados Interesse[] @relation("PedidoInteresses")
  autor        Usuario     @relation(fields: [usuarioId], references: [id])

  @@map("pedidos")
}

model Interesse {
  id          Int               @id @default(autoincrement())
  prestadorId Int
  pedidoId    Int
  status      STATUS_INTERESTED @default(PENDING)
  pedido      Pedido            @relation("PedidoInteresses", fields: [pedidoId], references: [id])
  prestador   Usuario           @relation("InteressePrestador", fields: [prestadorId], references: [id])

  @@map("interesse")
}

model Avaliacao {
  id          Int      @id @default(autoincrement())
  nota        Int
  comentario  String?
  created_at  DateTime @default(now())
  clienteId   Int
  prestadorId Int
  cliente     Usuario  @relation("ClienteAvaliacoes", fields: [clienteId], references: [id])
  prestador   Usuario  @relation("PrestadorAvaliacoes", fields: [prestadorId], references: [id])

  @@map("avaliacao")
}

model Commentario {
  id         Int     @id @default(autoincrement())
  comentario String
  usuarioId  Int
  prestador  Usuario @relation(fields: [usuarioId], references: [id])
}

model Carteira {
  id         Int                 @id @default(autoincrement())
  receita    Decimal             @default(0)
  created_at DateTime            @default(now())
  validade   String?
  usuarioId  Int                 @unique
  usuario    Usuario             @relation(fields: [usuarioId], references: [id])
  historico  HistoricoRecargas[]
  transacoes Transacao[]

  @@map("carteira")
}

model Transacao {
  id            Int                 @id @default(autoincrement())
  usuarioId     Int
  pacoteId      Int?
  carteiraId    Int
  valor         Decimal
  metodo        String
  status        String
  referencia    String?
  created_at    DateTime            @default(now())
  atualizado_em DateTime            @updatedAt
  historico     HistoricoRecargas[]
  carteira      Carteira            @relation(fields: [carteiraId], references: [id])
  pacote        Pacotes?            @relation(fields: [pacoteId], references: [id])
  usuario       Usuario             @relation(fields: [usuarioId], references: [id])

  @@map("transacao")
}

model HistoricoRecargas {
  id          Int        @id @default(autoincrement())
  valor       Decimal
  catergoy    Category   @default(INCOME)
  pacoteId    Int
  carteiraId  Int
  transacaoId Int?
  expires_at  DateTime?
  isExpired   Boolean    @default(false)
  created_at  DateTime   @default(now())
  carteira    Carteira   @relation(fields: [carteiraId], references: [id])
  pacote      Pacotes    @relation(fields: [pacoteId], references: [id])
  transacao   Transacao? @relation(fields: [transacaoId], references: [id])

  @@map("historico")
}

model Pacotes {
  id         Int                 @id @default(autoincrement())
  preco      Decimal
  title      String
  validade   String
  beneficio1 String?
  beneficio2 String?
  beneficio3 String?
  created_at DateTime            @default(now())
  historico  HistoricoRecargas[]
  transacoes Transacao[]

  @@map("pacotes")
}

model Notificacao {
  id          Int      @id @default(autoincrement())
  content     String
  image       String?
  AlreadySeen Boolean  @default(false)
  created_at  DateTime @default(now())
  authrId     Int
  author      Usuario  @relation(fields: [authrId], references: [id])

  @@map("notificacao")
}

model Postsvitrine {
  id          Int      @id @default(autoincrement())
  titulo      String
  description String?
  created_at  DateTime @default(now())
  image_path  String?
  usuarioId   Int
  usuario     Usuario  @relation(fields: [usuarioId], references: [id])

  @@map("postsvitrine")
}

model receitas {
  id     Int @id @default(autoincrement())
  amount Int @default(0)
}

model profissao {
  id         Int      @id @default(autoincrement())
  titulo     String
  created_at DateTime @default(now())
  categoryId Int
  category   category @relation(fields: [categoryId], references: [id])
}

model category {
  id         Int         @id @default(autoincrement())
  titulo     String
  image_path String?
  created_at DateTime    @default(now())
  profissao  profissao[]
}

enum COSTUMER_TYPES {
  COMPANY
  INDIVIDUAL
}

enum STATUS {
  PENDING
  INTERRUPTED
    CONFIRMED
  ACEPTED
}

enum STATUS_INTERESTED {
  PENDING
  CONFIRMED
  INTERRUPTED
  ACEPTED
}

enum ACCOUNT_STATUS {
  DESATIVADA
  ACTIVA
  PENDENTE
}

enum Brevidade {
  URGENTE
  BAIXO
  MEDIO
}

enum Category {
  INCOME
  OUTCOME
}

enum Role {
  ADMIN
  PRESTADOR_INDIVIDUAL
  PRESTADOR_COLECTIVO
  CLIENTE_COLECTIVO
  CLIENTE_INDIVIDUAL
}
